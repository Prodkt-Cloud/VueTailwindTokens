/*! For license information please see transform.js.LICENSE.txt */
(()=>{var t={299:(t,e,r)=>{"use strict";var n=r(798);function o(t){return!0===n(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,r;return!1!==o(t)&&"function"==typeof(e=t.constructor)&&!1!==o(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},798:t=>{"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},998:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(110),o=r(830),s=["em","ex","ch","rem","vw","vh","vmin","vmax","px","mm","cm","in","pt","pc","Q","vm"],i=["deg","grad","turn","rad"],a=["s","ms"],u=["Hz","kHz"],c=["dpi","dpcm","dppm"],p=["fr"],l=s.map((t=>t.toLowerCase())),h=i.map((t=>t.toLowerCase())),f=a.map((t=>t.toLowerCase())),y=u.map((t=>t.toLowerCase())),d=c.map((t=>t.toLowerCase())),v=p.map((t=>t.toLowerCase()));function m(t,e,r,n){const{source:o}=e;return new t(r,n,o)}e.newPunctuator=function(t,e){if(","===t.value||")"===t.value)return m(o.Punctuator,t,t.value,e);throw new Error(`illegal argument error "${t.value}"`)},e.newOperator=function(t,e){return m(o.Operator,t,t.value,e)},e.newString=function(t,e){return m(o.StringNode,t,t.value,e)},e.newWordNode=function(t,e){return function(t,e){if("word"===t.type){const r=n(t.value);if(r){const n=function(t,e,r){const{source:n}=e;if(!t.unit)return new o.NumberValue(t.number,r,n);const m=t.unit.toLowerCase();function b(e,o){const s=new e(t.number,o,r,n);return o!==t.unit&&(s.raws.unit={raw:t.unit,value:o}),s}let g;return(g=l.indexOf(m))>=0?b(o.LengthValue,s[g]):(g=h.indexOf(m))>=0?b(o.AngleValue,i[g]):(g=f.indexOf(m))>=0?b(o.TimeValue,a[g]):(g=y.indexOf(m))>=0?b(o.FrequencyValue,u[g]):(g=d.indexOf(m))>=0?b(o.ResolutionValue,c[g]):(g=v.indexOf(m))>=0?b(o.FlexValue,p[g]):"%"===m?b(o.PercentageValue,"%"):null}(r,t,e);if(n)return n}}return m(o.Word,t,t.value,e)}(t,e)},e.newFunction=function(t,e,r){return new o.FunctionNode(t.value,e,{start:t.source.start,end:r.source.end})},e.newParentheses=function(t,e){return new o.Parentheses(e,{start:t.source.start,end:t.source.end})},e.newMathExpression=function(t,e,r){const n="string"==typeof e?m(o.Operator,{source:{start:{index:0},end:{index:0}}},e," "):e,{before:s}=t.raws;return t.raws.before="",new o.MathExpression(t,n,r,s,{start:t.source.start,operator:n.source,end:r.source.end})}},54:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(988);e.Parser=n.Parser;var o=r(966);e.Tokenizer=o.Tokenizer;var s=r(109);e.Stringifier=s.Stringifier;var i=r(876);e.getResolvedType=i.getResolvedType;var a=r(780);e.reduceExpression=a.reduce;var u=r(998);e.newMathExpression=u.newMathExpression},988:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(404),o=r(830),s=r(998),i=r(922),a=r(35),u=/^([^-+0-9.]|-[^+0-9.])/u,c={"*":3,"/":3,"+":2,"-":2};function p(t){return t.source||{start:{index:0},end:{index:0}}}function l(t){return t&&"Punctuator"!==t.type&&"Operator"!==t.type?t:null}e.Parser=class{constructor(t,e){this.tokenizer=t,this.root=new o.Root({start:{index:0},end:{index:0}}),this.rescans=[],this.tokens=this.root.tokens,this.errors=this.root.errors}parse(){let t={container:this.root,fnName:"",post(){},eof(){}};for(;t;)t=this.processExpressions(t);const{tokens:e}=this;return e.length>0&&(p(this.root).end.index=e[e.length-1].source.end.index),this.errors.unshift(...this.tokenizer.errors),this.errors.sort(((t,e)=>t.index-e.index)),this.root}reportParseError(t,e=0){if(this.errors.find((r=>r.code===t&&r.index===e)))return;const r=n.ParseError.fromCode(t,e);this.errors.push(r)}processExpressions(t){let e;for(;e=this.scan();){const{token:r}=e;switch(r.type){case"word":if(u.test(r.value)){const n=this.scan();if(n){if(!n.raws&&"punctuator"===n.token.type&&"("===n.token.value)return this.processFunction(r,e.raws,n.token,t);this.back(n)}}t.container.push(s.newWordNode(r,e.raws));break;case"string":t.container.push(s.newString(r,e.raws));break;case"operator":this.checkAndMergeMathExpr(t,c[r.value]),t.container.push(s.newOperator(r,e.raws));break;case"punctuator":return this.checkAndMergeMathExpr(t),this.processPunctuator(r,e.raws,t)}}return this.postStack(t),t.eof(),null}checkAndMergeMathExpr(t,e){const{container:r}=t,{nodes:n}=r;if(n.length>=3){const o=n[n.length-2];if("Operator"===o.type&&c[o.value]&&(null==e||e<=c[o.value])){const e=this.mergeMathExpr(t);e&&r.push(e)}}}processPunctuator(t,e,r){const{container:n,parent:o}=r;if("("===t.value){const o=s.newParentheses(t,e);return n.push(o),this.createNestedStateContainer(o,r.fnName,r)}if(this.postStack(r),")"===t.value){if(o)return r.post(t,e),o;this.reportParseError("unexpected-parenthesis",t.source.start.index)}return n.push(s.newPunctuator(t,e)),r}processFunction(t,e,r,n){const o=s.newFunction(t,e,r);return n.container.push(o),this.createNestedStateContainer(o,o.name,n)}createNestedStateContainer(t,e,r){return{container:t,parent:r,fnName:e,post(e,r){r&&(t.raws.beforeClose=r),p(t).end=e.source.end},eof:()=>{t.unclosed=!0;const e=this.tokens[this.tokens.length-1],n=t.last;n&&(p(t).end=p(n).end),this.reportParseError("eof-in-bracket",e.source.end.index),r.eof()}}}mergeMathExpr(t){const{container:{nodes:e}}=t,r=e.pop(),n=e.pop(),o=e.pop()||null,u=()=>{o&&e.push(o),e.push(n,r)},c=e=>{i.isMathFunction(t.fnName)&&this.reportParseError("unexpected-calc-token",p(e).start.index)},h=l(r);if(a.isComma(n))return h||c(r),u(),null;if(!o)return c(l(n)?r:n),u(),null;const f=l(o);return f?"Operator"!==n.type?(c(n),u(),null):h?s.newMathExpression(f,n,h):(c(r),u(),null):(c(l(e[e.length-1])?n:o),u(),null)}postStack(t){const{container:e}=t,{nodes:r}=e;for(;r.length>1;){const r=this.mergeMathExpr(t);if(!r)return;e.push(r)}}scan(){const t=this.rescans.shift();if(t)return t;let e="",r=this.tokenizer.nextToken();for(;r;){if(this.tokens.push(r),"whitespace"!==r.type&&"comment"!==r.type&&"inline-comment"!==r.type)return{token:r,raws:e};e+=r.value,r=this.tokenizer.nextToken()}return e&&(this.root.raws.after=e),null}back(t){this.rescans.unshift(t)}}},780:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(922),o=r(35);function s(t){if("Number"===t.type||"Length"===t.type||"Angle"===t.type||"Time"===t.type||"Frequency"===t.type||"Resolution"===t.type||"Percentage"===t.type||"Flex"===t.type)return t;if("MathExpression"===t.type)return function(t){const e=s(t.left),r=s(t.right);if(!e||!r)return null;switch(t.operator){case"+":case"-":return function(t,e,r){if(t.type!==r.type)return null;const n="-"===e?(t,e)=>t-e:(t,e)=>t+e;return"Number"===t.type?{type:"Number",value:n(t.value,r.value)}:t.unit===r.unit?{type:t.type,value:n(t.value,r.value),unit:t.unit}:null}(e,t.operator,r);case"/":return function(t,e){return"Number"!==e.type?null:"Number"===t.type?{type:"Number",value:t.value/e.value}:{type:t.type,value:t.value/e.value,unit:t.unit}}(e,r);case"*":return function(t,e){return"Number"===t.type?"Number"===e.type?{type:"Number",value:t.value*e.value}:{type:e.type,value:t.value*e.value,unit:e.unit}:"Number"===e.type?{type:t.type,value:t.value*e.value,unit:t.unit}:null}(e,r)}return null}(t);if("Parentheses"===t.type||"Root"===t.type){if(1===t.nodes.length)return s(t.nodes[0])}else if("Function"===t.type&&"Function"===t.type&&n.isCalc(t.name))return function(t){const e=o.getFunctionArguments(t);return e&&1===e.length?s(e[0]):null}(t);return null}e.reduce=function(t){return s(t)}},876:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(922),o=r(35);function s(t){const e=i(t.left),r=i(t.right),{operator:n}=t;switch(n){case"+":case"-":return"Unknown"===e||"Unknown"===r?"Unknown":e===r?e:"Number"===e||"Number"===r?"invalid":"Percentage"===e?r:"Percentage"===r?e:"invalid";case"*":return"Unknown"===e||"Unknown"===r?"Unknown":"Number"===e?r:"Number"===r?e:"invalid";case"/":return"Unknown"===r?"Unknown":"Number"===r?e:"invalid"}return"Unknown"}function i(t){if("MathExpression"===t.type){const e=s(t);return"invalid"===e?"Unknown":e}return"Parentheses"===t.type?1===t.nodes.length?i(t.nodes[0]):"Unknown":"Function"===t.type?n.isCalc(t.name)?1===(e=t).nodes.length?a(e):"Unknown":n.isMin(t.name)||n.isMax(t.name)?a(t):n.isClamp(t.name)?function(t){return 5===t.nodes.length?a(t):"Unknown"}(t):"Unknown":function(t){const{type:e}=t;return"Number"===e||"Length"===e||"Angle"===e||"Time"===e||"Frequency"===e||"Resolution"===e||"Percentage"===e||"Flex"===e?e:"Unknown"}(t);var e}function a(t){const e=o.getFunctionArguments(t);if(!e)return"Unknown";const r=e.map(i);let n=null;for(const t of r)if(n&&"Percentage"!==n){if("Percentage"===t);else if(n!==t)return"Unknown"}else n=t;return n||"Unknown"}e.getResolvedType=s},109:(t,e)=>{"use strict";function r(t,e){const r=t.raws[e];return r?r.raw:`${t[e]}`}function n(t,e){return t.raws[e]||""}function o(t,e){return`${n(t,"before")}${e}`}function s(t){return o(t,`${r(t,"value")}${r(t,"unit")}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.Stringifier=class{constructor(t){this.options=Object.assign({autofix:!1},t||{})}stringify(t){return this[t.type](t)}Root(t){let e="";for(const r of t.nodes)e+=this.stringify(r);return e+=n(t,"after"),e}Function(t){let e=`${t.name}(`;for(const r of t.nodes)e+=this.stringify(r);return e+=n(t,"beforeClose"),!this.options.autofix&&t.unclosed||(e+=")"),o(t,e)}Parentheses(t){let e="(";for(const r of t.nodes)e+=this.stringify(r);return e+=n(t,"beforeClose"),!this.options.autofix&&t.unclosed||(e+=")"),o(t,e)}MathExpression(t){let e="",r=n(t,"between"),s="",i="";return this.options.autofix&&(r||(r=" "),t.right.raws.before||(s=" "),"MathExpression"===t.left.type&&("+"!==t.left.operator&&"-"!==t.left.operator||"*"!==t.operator&&"/"!==t.operator||(e+="(",r=`)${r}`)),"MathExpression"===t.right.type&&(("+"!==t.operator||"-"!==t.right.operator)&&("-"!==t.operator&&"*"!==t.operator||"+"!==t.right.operator&&"-"!==t.right.operator)&&"/"!==t.operator||(s+="(",i=`)${i}`))),o(t,`${e}${this.stringify(t.left)}${r}${t.operator}${s}${this.stringify(t.right)}${i}`)}Number(t){return o(t,r(t,"value"))}Punctuator(t){return o(t,t.value)}Word(t){return o(t,t.value)}String(t){return o(t,t.value)}Operator(t){return o(t,t.value)}Length(t){return s(t)}Angle(t){return s(t)}Time(t){return s(t)}Frequency(t){return s(t)}Resolution(t){return s(t)}Percentage(t){return s(t)}Flex(t){return s(t)}word(t){return t.value}punctuator(t){return t.value}operator(t){return t.value}whitespace(t){return t.value}comment(t){return t.value}string(t){return t.value}"inline-comment"(t){return t.value}}},966:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(404),o=r(293);function s(t){return t===o.LPAREN||t===o.RPAREN||t===o.COMMA}function i(t){return o.isDigit(t)||t===o.DOT}function a(t){return t===o.DQUOTE||t===o.SQUOTE}function u(t){return t===o.LPAREN?o.RPAREN:t===o.LBRACE?o.RBRACE:o.RBRACKET}e.Tokenizer=class{constructor(t,e){this.lastCode=o.NULL,this.rescan=!1,this.token=null,this.lastTokenType=null,this.errors=[],this.text=t,this.offset=-1,this.state="SCAN",this.nextTokenOffset=0,this.options=Object.assign({allowInlineCommnets:!0},e||{})}nextToken(){for(;null==this.token;){const t=this.scan();if(this.state=this[this.state](t)||"SCAN",t===o.EOF&&!this.rescan)break}const{token:t}=this;return this.token=null,t}scan(){return this.rescan?(this.rescan=!1,this.lastCode):this.next()}next(){return this.offset<this.text.length&&this.offset++,this.offset>=this.text.length?this.lastCode=o.EOF:this.lastCode=this.text.charCodeAt(this.offset)}back(){this.rescan=!0}reportParseError(t){const e=n.ParseError.fromCode(t,this.offset);this.errors.push(e)}getCode(t=0){return this.text.charCodeAt(this.nextTokenOffset+t)}commitToken(t,e=0){const r=this.nextTokenOffset,n=this.offset+e+1,o=this.text.slice(r,n);this.token={type:t,value:o,source:{start:{index:r},end:{index:n}}},this.nextTokenOffset=n,this.lastTokenType=t}SCAN(t){return o.isWhitespace(t)?"WHITESPACE":t===o.DQUOTE?"DQUOTE":t===o.SQUOTE?"SQUOTE":t===o.SLASH?"SLASH":t===o.MINUS?"MINUS":t===o.PLUS?"PLUS":t===o.STAR?(this.commitToken("operator"),"SCAN"):s(t)?(this.commitToken("punctuator"),"SCAN"):t===o.LBRACKET?"LBRACKET":t===o.LBRACE?"LBRACE":t===o.EOF?"SCAN":"WORD"}WORD(t){for(;!o.isWhitespace(t)&&!s(t)&&t!==o.PLUS&&t!==o.STAR&&t!==o.SLASH&&!a(t)&&t!==o.EOF;){if(t===o.MINUS){const t=this.getCode();if(i(t)||(t===o.MINUS||t===o.PLUS)&&i(this.getCode(1)))return this.commitToken("word",-1),"MINUS"}else t!==o.LBRACE&&t!==o.LBRACKET&&t!==o.LPAREN||this.skipBrakets(this.next(),u(t));t=this.next()}this.commitToken("word",-1),this.back()}LBRACKET(t){return this.skipBrakets(t,o.RBRACKET),"WORD"}LBRACE(t){return this.skipBrakets(t,o.RBRACE),"WORD"}WHITESPACE(t){for(;o.isWhitespace(t);)t=this.next();this.commitToken("whitespace",-1),this.back()}SLASH(t){return t===o.STAR?"COMMENT":t===o.SLASH&&this.options.allowInlineCommnets?"INLINE_COMMENT":(this.commitToken("operator",-1),void this.back())}COMMENT(t){for(;t!==o.EOF;){if(t===o.STAR&&(t=this.next())===o.SLASH)return void this.commitToken("comment");t=this.next()}this.commitToken("comment",-1),this.reportParseError("eof-in-comment")}INLINE_COMMENT(t){for(;t!==o.EOF;){if(t===o.LF||t===o.FF)return void this.commitToken("inline-comment");if(t===o.CR)return(t=this.next())===o.LF?void this.commitToken("inline-comment"):(this.commitToken("inline-comment",-1),this.back());t=this.next()}this.commitToken("inline-comment",-1)}MINUS(t){return"word"===this.lastTokenType||t===o.EOF||t!==o.MINUS&&!i(t)&&!o.isLetter(t)?(this.commitToken("operator",-1),void this.back()):"WORD"}PLUS(t){if("word"!==this.lastTokenType&&i(t))return"WORD";this.commitToken("operator",-1),this.back()}DQUOTE(t){this.skipString(t,o.DQUOTE)}SQUOTE(t){this.skipString(t,o.SQUOTE)}skipBrakets(t,e){const r=[];for(;t!==o.EOF;){if(e===t){const t=r.pop()||null;if(!t)return;e=t}else t!==o.LBRACE&&t!==o.LBRACKET&&t!==o.LPAREN||(e&&r.push(e),e=u(t));t=this.next()}this.reportParseError("eof-in-bracket")}skipString(t,e){for(;t!==o.EOF;){if(t===o.BACKSLASH)t=this.next();else if(t===e)return void this.commitToken("string");t=this.next()}this.commitToken("string",-1),this.reportParseError("eof-in-string")}}},922:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=/^(-(webkit|mox)-)?calc/iu,n=/^(-(webkit|mox)-)?min/iu,o=/^(-(webkit|mox)-)?max/iu,s=/^(-(webkit|mox)-)?clamp/iu;function i(t){return r.test(t)}function a(t){return n.test(t)}function u(t){return o.test(t)}function c(t){return s.test(t)}e.isCalc=i,e.isMin=a,e.isMax=u,e.isClamp=c,e.isMathFunction=function(t){return i(t)||c(t)||a(t)||u(t)}},830:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(109);let o=null;class s{constructor(){this.parent=null}toString(t){return"function"==typeof t?t(this):(t||o||(o=new n.Stringifier)).stringify(this)}walk(t,e){const r=this;let n;const o=[...r.nodes||[],r.left,r.right].filter((t=>Boolean(t))),s="string"==typeof t?e=>e.type===t:e=>t.test(e.type);for(const r of o){if(s(r)&&(n=e(r),!1===n))break;if(r.walk&&(n=r.walk(t,e),!1===n))break}return n}}class i extends s{push(...t){for(const e of t)"Root"===e.type?this.push(...e.nodes):(e.parent=this,this.nodes.push(e));return this}unshift(...t){for(const e of t.reverse())"Root"===e.type?this.unshift(...e.nodes):(e.parent=this,this.nodes.unshift(e));return this}append(...t){return this.push(...t)}prepend(...t){return this.unshift(...t)}insertBefore(t,e){if("Root"===e.type){const{nodes:r}=e;if(1===r.length)return this.insertBefore(t,r[0]);throw new Error("The given Root node is illegal.")}const r=this.nodes.indexOf(t);if(r<0)throw new Error("The given node could not be found.");return e.parent=this,this.nodes.splice(r,0,e),this}insertAfter(t,e){if("Root"===e.type){const{nodes:r}=e;if(1===r.length)return this.insertAfter(t,r[0]);throw new Error("The given Root node is illegal.")}const r=this.nodes.indexOf(t);if(r<0)throw new Error("The given node could not be found.");return e.parent=this,this.nodes.splice(r+1,0,e),this}removeAll(){for(const t of this.nodes)t.parent=null;return this.nodes=[],this}removeChild(t){const e=this.nodes.indexOf(t);return this.nodes[e].parent=null,this.nodes.splice(e,1),this}get first(){return this.nodes[0]||null}get last(){return this.nodes[this.nodes.length-1]||null}}e.NumberValue=class extends s{constructor(t,e,r){super();const n=parseFloat(t);this.type="Number",this.value=n,this.raws={before:e,value:{raw:t,value:n}},this.source=r}};class a extends s{constructor(t,e,r,n,o){super();const s=parseFloat(e);this.type=t,this.value=s,this.unit=r,this.raws={before:n,value:{raw:e,value:s}},this.source=o}}e.LengthValue=class extends a{constructor(t,e,r,n){super("Length",t,e,r,n)}},e.AngleValue=class extends a{constructor(t,e,r,n){super("Angle",t,e,r,n)}},e.TimeValue=class extends a{constructor(t,e,r,n){super("Time",t,e,r,n)}},e.FrequencyValue=class extends a{constructor(t,e,r,n){super("Frequency",t,e,r,n)}},e.ResolutionValue=class extends a{constructor(t,e,r,n){super("Resolution",t,e,r,n)}},e.PercentageValue=class extends a{constructor(t,e,r,n){super("Percentage",t,e,r,n)}},e.FlexValue=class extends a{constructor(t,e,r,n){super("Flex",t,e,r,n)}};class u extends s{constructor(t,e,r,n){super(),this.type=t,this.value=e,this.raws={before:r},this.source=n}}function c(t,e,r){const n=Symbol(`${e}`);Object.defineProperties(t,{[n]:{writable:!0,enumerable:!1},[e]:{get(){return this[n]},set(t){const e=this[n];this[n]=r(t,e)},enumerable:!0}})}e.Word=class extends u{constructor(t,e,r){super("Word",t,e,r)}},e.StringNode=class extends u{constructor(t,e,r){super("String",t,e,r)}},e.MathExpression=class extends s{constructor(t,e,r,n,o){super();const s=e.value,i=e.raws.before;this.type="MathExpression";const a=(t,e)=>{let r;if("Root"===t.type){const{nodes:e}=t;if(1!==e.length)throw new Error("The given Root node is illegal.");r=e[0]}else r=t;return r.parent=this,e&&(e.parent=null),r};c(this,"left",a),this.left=t,this.operator=s,c(this,"right",a),this.right=r,this.raws={before:n,between:i},this.source=o}},e.FunctionNode=class extends i{constructor(t,e,r){super(),this.type="Function",this.name=t,this.nodes=[],this.raws={before:e},this.source=r}},e.Parentheses=class extends i{constructor(t,e){super(),this.type="Parentheses",this.nodes=[],this.raws={before:t},this.source=e}},e.Punctuator=class extends u{constructor(t,e,r){super("Punctuator",t,e,r)}},e.Root=class extends i{constructor(t){super(),this.type="Root",this.nodes=[],this.tokens=[],this.errors=[],this.raws={after:""},this.source=t}},e.Operator=class extends u{constructor(t,e,r){super("Operator",t,e,r)}}},293:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EOF=-1,e.NULL=0,e.TAB=9,e.CR=13,e.LF=10,e.FF=12,e.SPACE=32,e.DQUOTE=34,e.SQUOTE=39,e.LPAREN=40,e.RPAREN=41,e.STAR=42,e.PLUS=43,e.COMMA=44,e.MINUS=45,e.DOT=46,e.SLASH=47,e.LBRACKET=91,e.BACKSLASH=92,e.RBRACKET=93,e.LBRACE=123,e.RBRACE=125,e.isWhitespace=function(t){return t===e.TAB||t===e.LF||t===e.FF||t===e.CR||t===e.SPACE},e.isDigit=function(t){return t>=48&&t<=57},e.isLetter=function(t){return t>=97&&t<=122||t>=65&&t<=90}},35:(t,e)=>{"use strict";function r(t){return"Punctuator"===t.type&&","===t.value}Object.defineProperty(e,"__esModule",{value:!0}),e.isComma=r,e.getFunctionArguments=function(t){const{nodes:e}=t,n=e[0];if(!n||r(n))return null;const o=[n],s=e.length;for(let t=1;t<s;t++){if(!r(e[t++]))return null;const n=e[t];if(!n||r(n))return null;o.push(n)}return o}},784:(t,e,r)=>{"use strict";const n=r(404),o=r(54);o.Parser,o.Tokenizer,o.Stringifier,o.getResolvedType,o.reduceExpression,o.newMathExpression,e.ZP={parse:function(t,e){const r=new o.Tokenizer(t,e);return new o.Parser(r,e).parse()},stringify:function(t,e){return new o.Stringifier(e).stringify(t)},getResolvedType:o.getResolvedType,reduceExpression:o.reduceExpression,mathExpr:o.newMathExpression,Parser:o.Parser,Tokenizer:o.Tokenizer,Stringifier:o.Stringifier,AST:n}},761:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r extends SyntaxError{static fromCode(t,e){return new r(n[t],t,e)}constructor(t,e,r){super(t),this.code=e,this.index=r}}e.ParseError=r;const n={"eof-in-string":"Unclosed string","eof-in-comment":"Unclosed comment","eof-in-bracket":"Unclosed bracket","unexpected-parenthesis":"Unexpected token","unexpected-calc-token":"Unexpected token"}},404:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(761))},110:t=>{var e="-".charCodeAt(0),r="+".charCodeAt(0),n=".".charCodeAt(0),o="e".charCodeAt(0),s="E".charCodeAt(0);t.exports=function(t){for(var i,a=0,u=t.length,c=!1,p=-1,l=!1;a<u;){if((i=t.charCodeAt(a))>=48&&i<=57)l=!0;else if(i===o||i===s){if(p>-1)break;p=a}else if(i===n){if(c)break;c=!0}else{if(i!==r&&i!==e)break;if(0!==a)break}a+=1}return p+1===a&&a--,!!l&&{number:t.slice(0,a),unit:t.slice(a)}}},86:(t,e,r)=>{"use strict";const n=r(299);function o(t,e,r,n){if(!a(t))return t;let u=n||{};const c=Array.isArray(e);if(!c&&"string"!=typeof e)return t;let p=u.merge;p&&"function"!=typeof p&&(p=Object.assign);const l=(c?e:function(t,e){const r=function(t,e){let r=t;if(void 0===e)return r+"";const n=Object.keys(e);for(let t=0;t<n.length;t++){const o=n[t];r+=";"+o+"="+String(e[o])}return r}(t,e);if(o.memo[r])return o.memo[r];const n=e&&e.separator?e.separator:".";let s=[],i=[];s=e&&"function"==typeof e.split?e.split(t):t.split(n);for(let t=0;t<s.length;t++){let e=s[t];for(;e&&"\\"===e.slice(-1)&&null!=s[t+1];)e=e.slice(0,-1)+n+s[++t];i.push(e)}return o.memo[r]=i,i}(e,u)).filter(i),h=l.length,f=t;if(!n&&1===l.length)return s(t,l[0],r,p),t;for(let e=0;e<h;e++){let n=l[e];if(a(t[n])||(t[n]={}),e===h-1){s(t,n,r,p);break}t=t[n]}return f}function s(t,e,r,o){o&&n(t[e])&&n(r)?t[e]=o({},t[e],r):t[e]=r}function i(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}function a(t){return null!==t&&("object"==typeof t||"function"==typeof t)}o.memo={},t.exports=o}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>fr});var t,e,o=function(t,e){var r={};for(var n in"string"==typeof e&&(e=[].slice.call(arguments,1)),t)t.hasOwnProperty&&!t.hasOwnProperty(n)||-1===e.indexOf(n)&&(r[n]=t[n]);return r},s=r(86),i=r.n(s);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(e){var r=e.type?e.type:function(e){switch(e){case"color":case"colors":return t.COLOR;case"space":case"spacing":return t.SPACING;case"size":case"sizing":return t.SIZING;case"boxShadow":return t.BOX_SHADOW;case"borderRadius":return t.BORDER_RADIUS;case"borderWidth":return t.BORDER_WIDTH;case"opacity":return t.OPACITY;case"fontFamilies":return t.FONT_FAMILIES;case"fontWeights":return t.FONT_WEIGHTS;case"fontSizes":return t.FONT_SIZES;case"lineHeights":return t.LINE_HEIGHTS;case"typography":return t.TYPOGRAPHY;case"letterSpacing":return t.LETTER_SPACING;case"paragraphSpacing":return t.PARAGRAPH_SPACING;case"composition":return t.COMPOSITION;default:return t.OTHER}}(e.name.split(".").slice(0,1).toString());return u(u({},e),{},{type:r})}function l(t,e,r){return Math.min(Math.max(t,r),e)}(e=t||(t={})).OTHER="other",e.COLOR="color",e.BORDER_RADIUS="borderRadius",e.SIZING="sizing",e.SPACING="spacing",e.TEXT="text",e.TYPOGRAPHY="typography",e.OPACITY="opacity",e.BORDER_WIDTH="borderWidth",e.BOX_SHADOW="boxShadow",e.FONT_FAMILIES="fontFamilies",e.FONT_WEIGHTS="fontWeights",e.LINE_HEIGHTS="lineHeights",e.FONT_SIZES="fontSizes",e.LETTER_SPACING="letterSpacing",e.PARAGRAPH_SPACING="paragraphSpacing",e.TEXT_DECORATION="textDecoration",e.TEXT_CASE="textCase",e.COMPOSITION="composition";class h extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}function f(t){if("string"!=typeof t)throw new h(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=x.test(t)?function(t){const e=t.toLowerCase().trim(),r=d[function(t){let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return(e>>>0)%2341}(e)];if(!r)throw new h(t);return`#${r}`}(t):t;const r=m.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map((t=>parseInt(v(t,2),16))),parseInt(v(t[3]||"f",2),16)/255]}const n=b.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,16))),parseInt(t[3]||"ff",16)/255]}const o=g.exec(e);if(o){const t=Array.from(o).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,10))),parseFloat(t[3]||"1")]}const s=w.exec(e);if(s){const[e,r,n,o]=Array.from(s).slice(1).map(parseFloat);if(l(0,100,r)!==r)throw new h(t);if(l(0,100,n)!==n)throw new h(t);return[...A(e,r,n),o||1]}throw new h(t)}const y=t=>parseInt(t.replace(/_/g,""),36),d="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((t,e)=>{const r=y(e.substring(0,3)),n=y(e.substring(3)).toString(16);let o="";for(let t=0;t<6-n.length;t++)o+="0";return t[r]=`${o}${n}`,t}),{}),v=(t,e)=>Array.from(Array(e)).map((()=>t)).join(""),m=new RegExp(`^#${v("([a-f0-9])",3)}([a-f0-9])?$`,"i"),b=new RegExp(`^#${v("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),g=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${v(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),w=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,x=/^[a-z]+$/i,O=t=>Math.round(255*t),A=(t,e,r)=>{let n=r/100;if(0===e)return[n,n,n].map(O);const o=(t%360+360)%360/60,s=(1-Math.abs(2*n-1))*(e/100),i=s*(1-Math.abs(o%2-1));let a=0,u=0,c=0;o>=0&&o<1?(a=s,u=i):o>=1&&o<2?(a=i,u=s):o>=2&&o<3?(u=s,c=i):o>=3&&o<4?(u=i,c=s):o>=4&&o<5?(a=i,c=s):o>=5&&o<6&&(a=s,c=i);const p=n-s/2;return[a+p,u+p,c+p].map(O)};function S(t){const[e,r,n,o]=f(t);let s=t=>{const e=l(0,255,t).toString(16);return 1===e.length?`0${e}`:e};return`#${s(e)}${s(r)}${s(n)}${o<1?s(Math.round(255*o)):""}`}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function T(t){try{if("string"!=typeof t)return t;var e=/#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/g,r=t;try{var n=Array.from(r.matchAll(/(rgba?\(.*?\))/g),(function(t){return t[0]})),o=Array.from(r.matchAll(/(hsla?\(.*?\))/g),(function(t){return t[0]}));o.length>0&&o.forEach((function(t){r=r.replace(t,S(t))})),n.length>0&&n.forEach((function(t){var n,o,s,i=t,a=t.replace(/rgba?\(/g,"").replace(")",""),u=a.match(e),c="1";if(u){var p,l,h=E(f(u[0]),3);n=h[0],o=h[1],s=h[2],c=null!==(p=null===(l=a.split(",").pop())||void 0===l?void 0:l.trim())&&void 0!==p?p:"0"}else{var y=a.split(",").map((function(t){return t.trim()})),d=E(y,4);n=d[0],o=d[1],s=d[2];var v=d[3];c=void 0===v?"1":v}var m,b,g=(b=(m=c).match(/(\d+%)/))?Number(b[0].slice(0,-1))/100:Number(m);r=r.split(i).join(S("rgba(".concat(n,", ").concat(o,", ").concat(s,", ").concat(g,")")))}))}catch(e){console.log("error",e,t)}return r}catch(t){console.error(t)}return null}var _,P,M,j,R=/(\$[^\s,]+\w)|({([^]*))/g,C=/(\$[^\s,]+\w)|({([^}]*)})/g,N=function(t){return null==t?void 0:t.toString().match(C)};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function L(t){return!(!t||"object"!==I(t)||!("value"in t)||void 0===t.value||null===t.value)}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function U(e){return"object"===F(e)&&e.type===t.TYPOGRAPHY}function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function B(t){return!!(t&&"object"===z(t)&&"value"in t&&"name"in t)}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function W(e){return"object"===D(e)&&e.type===t.BOX_SHADOW}(j=_||(_={})).sizing="sizing",j.height="height",j.width="width",j.spacing="spacing",j.verticalPadding="verticalPadding",j.horizontalPadding="horizontalPadding",j.paddingTop="paddingTop",j.paddingRight="paddingRight",j.paddingBottom="paddingBottom",j.paddingLeft="paddingLeft",j.itemSpacing="itemSpacing",j.fill="fill",j.border="border",j.borderRadius="borderRadius",j.borderRadiusTopLeft="borderRadiusTopLeft",j.borderRadiusTopRight="borderRadiusTopRight",j.borderRadiusBottomRight="borderRadiusBottomRight",j.borderRadiusBottomLeft="borderRadiusBottomLeft",j.borderWidth="borderWidth",j.borderWidthTop="borderWidthTop",j.borderWidthRight="borderWidthRight",j.borderWidthBottom="borderWidthBottom",j.borderWidthLeft="borderWidthLeft",j.boxShadow="boxShadow",j.opacity="opacity",j.fontFamilies="fontFamilies",j.fontWeights="fontWeights",j.fontSizes="fontSizes",j.lineHeights="lineHeights",j.typography="typography",j.composition="composition",j.letterSpacing="letterSpacing",j.paragraphSpacing="paragraphSpacing",j.textCase="textCase",j.textDecoration="textDecoration",j.tokenValue="tokenValue",j.value="value",j.tokenName="tokenName",j.description="description",(M=P||(P={})).LOCAL="local",M.JSONBIN="jsonbin",M.GITHUB="github",M.GITLAB="gitlab",M.ADO="ado",M.URL="url";var $="INUMBER",H="IOP1",V="IOP2",q="IOP3",G="IVAR",Y="IVARNAME",Q="IFUNCALL",K="IFUNDEF",X="IEXPR",Z="IEXPREVAL",J="IMEMBER",tt="IENDSTATEMENT",et="IARRAY";function rt(t,e){this.type=t,this.value=null!=e?e:0}function nt(t){return new rt(H,t)}function ot(t){return new rt(V,t)}function st(t){return new rt(q,t)}function it(t,e,r,n,o){for(var s,i,a,u,c=[],p=[],l=0;l<t.length;l++){var h=t[l],f=h.type;if(f===$||f===Y)Array.isArray(h.value)?c.push.apply(c,it(h.value.map((function(t){return new rt($,t)})).concat(new rt(et,h.value.length)),e,r,n,o)):c.push(h);else if(f===G&&o.hasOwnProperty(h.value))h=new rt($,o[h.value]),c.push(h);else if(f===V&&c.length>1)i=c.pop(),s=c.pop(),u=r[h.value],h=new rt($,u(s.value,i.value)),c.push(h);else if(f===q&&c.length>2)a=c.pop(),i=c.pop(),s=c.pop(),"?"===h.value?c.push(s.value?i.value:a.value):(u=n[h.value],h=new rt($,u(s.value,i.value,a.value)),c.push(h));else if(f===H&&c.length>0)s=c.pop(),u=e[h.value],h=new rt($,u(s.value)),c.push(h);else if(f===X){for(;c.length>0;)p.push(c.shift());p.push(new rt(X,it(h.value,e,r,n,o)))}else if(f===J&&c.length>0)s=c.pop(),c.push(new rt($,s.value[h.value]));else{for(;c.length>0;)p.push(c.shift());p.push(h)}}for(;c.length>0;)p.push(c.shift());return p}function at(t,e,r){for(var n=[],o=0;o<t.length;o++){var s=t[o],i=s.type;if(i===G&&s.value===e)for(var a=0;a<r.tokens.length;a++){var u,c=r.tokens[a];u=c.type===H?nt(c.value):c.type===V?ot(c.value):c.type===q?st(c.value):new rt(c.type,c.value),n.push(u)}else i===X?n.push(new rt(X,at(s.value,e,r))):n.push(s)}return n}function ut(t,e,r){var n,o,s,i,a,u,c=[];if(pt(t))return lt(t,r);for(var p=t.length,l=0;l<p;l++){var h=t[l],f=h.type;if(f===$||f===Y)c.push(h.value);else if(f===V)o=c.pop(),n=c.pop(),"and"===h.value?c.push(!!n&&!!ut(o,e,r)):"or"===h.value?c.push(!!n||!!ut(o,e,r)):"="===h.value?(i=e.binaryOps[h.value],c.push(i(n,ut(o,e,r),r))):(i=e.binaryOps[h.value],c.push(i(lt(n,r),lt(o,r))));else if(f===q)s=c.pop(),o=c.pop(),n=c.pop(),"?"===h.value?c.push(ut(n?o:s,e,r)):(i=e.ternaryOps[h.value],c.push(i(lt(n,r),lt(o,r),lt(s,r))));else if(f===G)if(h.value in e.functions)c.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))c.push(e.unaryOps[h.value]);else{var y=r[h.value];if(void 0===y)throw new Error("undefined variable: "+h.value);c.push(y)}else if(f===H)n=c.pop(),i=e.unaryOps[h.value],c.push(i(lt(n,r)));else if(f===Q){for(u=h.value,a=[];u-- >0;)a.unshift(lt(c.pop(),r));if(!(i=c.pop()).apply||!i.call)throw new Error(i+" is not a function");c.push(i.apply(void 0,a))}else if(f===K)c.push(function(){for(var t=c.pop(),n=[],o=h.value;o-- >0;)n.unshift(c.pop());var s=c.pop(),i=function(){for(var o=Object.assign({},r),s=0,i=n.length;s<i;s++)o[n[s]]=arguments[s];return ut(t,e,o)};return Object.defineProperty(i,"name",{value:s,writable:!1}),r[s]=i,i}());else if(f===X)c.push(ct(h,e));else if(f===Z)c.push(h);else if(f===J)n=c.pop(),c.push(n[h.value]);else if(f===tt)c.pop();else{if(f!==et)throw new Error("invalid Expression");for(u=h.value,a=[];u-- >0;)a.unshift(c.pop());c.push(a)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:lt(c[0],r)}function ct(t,e,r){return pt(t)?t:{type:Z,value:function(r){return ut(t.value,e,r)}}}function pt(t){return t&&t.type===Z}function lt(t,e){return pt(t)?t.value(e):t}function ht(t,e){for(var r,n,o,s,i,a,u=[],c=0;c<t.length;c++){var p=t[c],l=p.type;if(l===$)"number"==typeof p.value&&p.value<0?u.push("("+p.value+")"):Array.isArray(p.value)?u.push("["+p.value.map(ft).join(", ")+"]"):u.push(ft(p.value));else if(l===V)n=u.pop(),r=u.pop(),s=p.value,e?"^"===s?u.push("Math.pow("+r+", "+n+")"):"and"===s?u.push("(!!"+r+" && !!"+n+")"):"or"===s?u.push("(!!"+r+" || !!"+n+")"):"||"===s?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+r+"),("+n+")))"):"=="===s?u.push("("+r+" === "+n+")"):"!="===s?u.push("("+r+" !== "+n+")"):"["===s?u.push(r+"[("+n+") | 0]"):u.push("("+r+" "+s+" "+n+")"):"["===s?u.push(r+"["+n+"]"):u.push("("+r+" "+s+" "+n+")");else if(l===q){if(o=u.pop(),n=u.pop(),r=u.pop(),"?"!==(s=p.value))throw new Error("invalid Expression");u.push("("+r+" ? "+n+" : "+o+")")}else if(l===G||l===Y)u.push(p.value);else if(l===H)r=u.pop(),"-"===(s=p.value)||"+"===s?u.push("("+s+r+")"):e?"not"===s?u.push("(!"+r+")"):"!"===s?u.push("fac("+r+")"):u.push(s+"("+r+")"):"!"===s?u.push("("+r+"!)"):u.push("("+s+" "+r+")");else if(l===Q){for(a=p.value,i=[];a-- >0;)i.unshift(u.pop());s=u.pop(),u.push(s+"("+i.join(", ")+")")}else if(l===K){for(n=u.pop(),a=p.value,i=[];a-- >0;)i.unshift(u.pop());r=u.pop(),e?u.push("("+r+" = function("+i.join(", ")+") { return "+n+" })"):u.push("("+r+"("+i.join(", ")+") = "+n+")")}else if(l===J)r=u.pop(),u.push(r+"."+p.value);else if(l===et){for(a=p.value,i=[];a-- >0;)i.unshift(u.pop());u.push("["+i.join(", ")+"]")}else if(l===X)u.push("("+ht(p.value,e)+")");else if(l!==tt)throw new Error("invalid Expression")}return u.length>1&&(u=e?[u.join(",")]:[u.join(";")]),String(u[0])}function ft(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function yt(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function dt(t,e,r){for(var n=!!(r=r||{}).withMembers,o=null,s=0;s<t.length;s++){var i=t[s];i.type===G||i.type===Y?n||yt(e,i.value)?null!==o?(yt(e,o)||e.push(o),o=i.value):o=i.value:e.push(i.value):i.type===J&&n&&null!==o?o+="."+i.value:i.type===X?dt(i.value,e,r):null!==o&&(yt(e,o)||e.push(o),o=null)}null===o||yt(e,o)||e.push(o)}function vt(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}rt.prototype.toString=function(){switch(this.type){case $:case H:case V:case q:case G:case Y:case tt:return this.value;case Q:return"CALL "+this.value;case K:return"DEF "+this.value;case et:return"ARRAY "+this.value;case J:return"."+this.value;default:return"Invalid Instruction"}},vt.prototype.simplify=function(t){return t=t||{},new vt(it(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},vt.prototype.substitute=function(t,e){return e instanceof vt||(e=this.parser.parse(String(e))),new vt(at(this.tokens,t,e),this.parser)},vt.prototype.evaluate=function(t){return t=t||{},ut(this.tokens,this,t)},vt.prototype.toString=function(){return ht(this.tokens,!1)},vt.prototype.symbols=function(t){t=t||{};var e=[];return dt(this.tokens,e,t),e},vt.prototype.variables=function(t){t=t||{};var e=[];dt(this.tokens,e,t);var r=this.functions;return e.filter((function(t){return!(t in r)}))},vt.prototype.toJSFunction=function(t,e){var r=this,n=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+ht(this.simplify(e).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var mt="TEOF",bt="TOP",gt="TNUMBER",wt="TSTRING",xt="TPAREN",Ot="TBRACKET",At="TCOMMA",St="TNAME",Et="TSEMICOLON";function kt(t,e,r){this.type=t,this.value=e,this.index=r}function Tt(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}kt.prototype.toString=function(){return this.type+": "+this.value},Tt.prototype.newToken=function(t,e,r){return new kt(t,e,null!=r?r:this.pos)},Tt.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},Tt.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},Tt.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(mt,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},Tt.prototype.isString=function(){var t=!1,e=this.pos,r=this.expression.charAt(e);if("'"===r||'"'===r)for(var n=this.expression.indexOf(r,e+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,"\\"!==this.expression.charAt(n-1)){var o=this.expression.substring(e+1,n);this.current=this.newToken(wt,this.unescape(o),e),t=!0;break}n=this.expression.indexOf(r,n+1)}return t},Tt.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(xt,t),this.pos++,!0)},Tt.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken(Ot,t),this.pos++,0))},Tt.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(At,","),this.pos++,!0)},Tt.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(Et,";"),this.pos++,!0)},Tt.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&"."!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(n in this.consts)return this.current=this.newToken(gt,this.consts[n]),this.pos+=n.length,!0}return!1},Tt.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(bt,n),this.pos+=n.length,!0}return!1},Tt.prototype.isName=function(){for(var t=this.pos,e=t,r=!1;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()){if(e===this.pos&&("$"===n||"_"===n)){"_"===n&&(r=!0);continue}if(e===this.pos||!r||"_"!==n&&(n<"0"||n>"9"))break}else r=!0}if(r){var o=this.expression.substring(t,e);return this.current=this.newToken(St,o),this.pos+=o.length,!0}return!1},Tt.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var _t=/^[0-9a-f]{4}$/i;function Pt(t,e,r){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==r.allowMemberAccess}Tt.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var r=t.substring(0,e);e>=0;){var n=t.charAt(++e);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"u":var o=t.substring(e+1,e+5);_t.test(o)||this.parseError("Illegal escape sequence: \\u"+o),r+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++e;var s=t.indexOf("\\",e);r+=t.substring(e,s<0?t.length:s),e=s}return r},Tt.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},Tt.prototype.isRadixInteger=function(){var t,e,r=this.pos;if(r>=this.expression.length-2||"0"!==this.expression.charAt(r))return!1;if(++r,"x"===this.expression.charAt(r))t=16,e=/^[0-9a-f]$/i,++r;else{if("b"!==this.expression.charAt(r))return!1;t=2,e=/^[01]$/i,++r}for(var n=!1,o=r;r<this.expression.length;){var s=this.expression.charAt(r);if(!e.test(s))break;r++,n=!0}return n&&(this.current=this.newToken(gt,parseInt(this.expression.substring(o,r),t)),this.pos=r),n},Tt.prototype.isNumber=function(){for(var t,e=!1,r=this.pos,n=r,o=r,s=!1,i=!1;r<this.expression.length&&((t=this.expression.charAt(r))>="0"&&t<="9"||!s&&"."===t);)"."===t?s=!0:i=!0,r++,e=i;if(e&&(o=r),"e"===t||"E"===t){r++;for(var a=!0,u=!1;r<this.expression.length;){if(t=this.expression.charAt(r),!a||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,a=!1}else a=!1;r++}u||(r=o)}return e?(this.current=this.newToken(gt,parseFloat(this.expression.substring(n,r))),this.pos=r):this.pos=o,e},Tt.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(bt,e);else if("∙"===e||"•"===e)this.current=this.newToken(bt,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(bt,">="),this.pos++):this.current=this.newToken(bt,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(bt,"<="),this.pos++):this.current=this.newToken(bt,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(bt,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(bt,"=="),this.pos++):this.current=this.newToken(bt,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(bt,"!="),this.pos++):this.current=this.newToken(bt,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},Tt.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},Tt.prototype.getCoordinates=function(){var t,e=0,r=-1;do{e++,t=this.pos-r,r=this.expression.indexOf("\n",r+1)}while(r>=0&&r<this.pos);return{line:e,column:t}},Tt.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},Pt.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Pt.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?yt(e,t.value):"function"==typeof e?e(t):t.value===e)},Pt.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Pt.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Pt.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},Pt.prototype.expect=function(t,e){if(!this.accept(t,e)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(e||t))}},Pt.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(St)||this.accept(bt,(function(t){return t.value in e})))t.push(new rt(G,this.current.value));else if(this.accept(gt))t.push(new rt($,this.current.value));else if(this.accept(wt))t.push(new rt($,this.current.value));else if(this.accept(xt,"("))this.parseExpression(t),this.expect(xt,")");else{if(!this.accept(Ot,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(Ot,"]"))t.push(new rt(et,0));else{var r=this.parseArrayList(t);t.push(new rt(et,r))}}},Pt.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},Pt.prototype.pushExpression=function(t,e){for(var r=0,n=e.length;r<n;r++)t.push(e[r])},Pt.prototype.parseUntilEndStatement=function(t,e){return!!this.accept(Et)&&(!this.nextToken||this.nextToken.type===mt||this.nextToken.type===xt&&")"===this.nextToken.value||e.push(new rt(tt)),this.nextToken.type!==mt&&this.parseExpression(e),t.push(new rt(X,e)),!0)},Pt.prototype.parseArrayList=function(t){for(var e=0;!this.accept(Ot,"]");)for(this.parseExpression(t),++e;this.accept(At);)this.parseExpression(t),++e;return e},Pt.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(bt,"=");){var e=t.pop(),r=[],n=t.length-1;if(e.type!==Q){if(e.type!==G&&e.type!==J)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),t.push(new rt(Y,e.value)),t.push(new rt(X,r)),t.push(ot("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,s=e.value+1;o<s;o++){var i=n-o;t[i].type===G&&(t[i]=new rt(Y,t[i].value))}this.parseVariableAssignmentExpression(r),t.push(new rt(X,r)),t.push(new rt(K,e.value))}}},Pt.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(bt,"?");){var e=[],r=[];this.parseConditionalExpression(e),this.expect(bt,":"),this.parseConditionalExpression(r),t.push(new rt(X,e)),t.push(new rt(X,r)),t.push(st("?"))}},Pt.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(bt,"or");){var e=[];this.parseAndExpression(e),t.push(new rt(X,e)),t.push(ot("or"))}},Pt.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(bt,"and");){var e=[];this.parseComparison(e),t.push(new rt(X,e)),t.push(ot("and"))}};var Mt=["==","!=","<","<=",">=",">","in"];Pt.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(bt,Mt);){var e=this.current;this.parseAddSub(t),t.push(ot(e.value))}};var jt=["+","-","||"];Pt.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(bt,jt);){var e=this.current;this.parseTerm(t),t.push(ot(e.value))}};var Rt=["*","/","%"];function Ct(t,e){return Number(t)+Number(e)}function Nt(t,e){return t-e}function It(t,e){return t*e}function Lt(t,e){return t/e}function Ft(t,e){return t%e}function Ut(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function zt(t,e){return t===e}function Bt(t,e){return t!==e}function Dt(t,e){return t>e}function Wt(t,e){return t<e}function $t(t,e){return t>=e}function Ht(t,e){return t<=e}function Vt(t,e){return Boolean(t&&e)}function qt(t,e){return Boolean(t||e)}function Gt(t,e){return yt(e,t)}function Yt(t){return(Math.exp(t)-Math.exp(-t))/2}function Qt(t){return(Math.exp(t)+Math.exp(-t))/2}function Kt(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function Xt(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function Zt(t){return Math.log(t+Math.sqrt(t*t-1))}function Jt(t){return Math.log((1+t)/(1-t))/2}function te(t){return Math.log(t)*Math.LOG10E}function ee(t){return-t}function re(t){return!t}function ne(t){return t<0?Math.ceil(t):Math.floor(t)}function oe(t){return Math.random()*(t||1)}function se(t){return ae(t+1)}Pt.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(bt,Rt);){var e=this.current;this.parseFactor(t),t.push(ot(e.value))}},Pt.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(bt,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===xt&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===Et||this.nextToken.type===At||this.nextToken.type===mt||this.nextToken.type===xt&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var r=this.current;this.parseFactor(t),t.push(nt(r.value))}else this.parseExponential(t)},Pt.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(bt,"^");)this.parseFactor(t),t.push(ot("^"))},Pt.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(bt,"!");)t.push(nt("!"))},Pt.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(bt,(function(t){return t.value in e}))){var r=this.current;this.parseAtom(t),t.push(nt(r.value))}else for(this.parseMemberExpression(t);this.accept(xt,"(");)if(this.accept(xt,")"))t.push(new rt(Q,0));else{var n=this.parseArgumentList(t);t.push(new rt(Q,n))}},Pt.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(xt,")");)for(this.parseExpression(t),++e;this.accept(At);)this.parseExpression(t),++e;return e},Pt.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(bt,".")||this.accept(Ot,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(St),t.push(new rt(J,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(Ot,"]"),t.push(ot("["))}}};var ie=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function ae(t){var e,r;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var n=t-2,o=t-1;n>1;)o*=n,n--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*ae(1-t));if(t>=171.35)return 1/0;if(t>85){var s=t*t,i=s*t,a=i*t,u=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*s)-139/(51840*i)-571/(2488320*a)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,r=ie[0];for(var c=1;c<ie.length;++c)r+=ie[c]/(t+c);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*r}function ue(t){return Array.isArray(t)?t.length:String(t).length}function ce(){for(var t=0,e=0,r=0;r<arguments.length;r++){var n,o=Math.abs(arguments[r]);e<o?(t=t*(n=e/o)*n+1,e=o):t+=o>0?(n=o/e)*n:o}return e===1/0?1/0:e*Math.sqrt(t)}function pe(t,e,r){return t?e:r}function le(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function he(t,e,r){return r&&(r[t]=e),e}function fe(t,e){return t[0|e]}function ye(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function de(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function ve(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,r){return t(e,r)}))}function me(t,e,r){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce((function(e,r,n){return t(e,r,n)}),e)}function be(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,r){return t(e,r)}))}function ge(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function we(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function xe(t){return(t>0)-(t<0)||+t}var Oe=1/3;function Ae(t){return t<0?-Math.pow(-t,Oe):Math.pow(t,Oe)}function Se(t){return Math.exp(t)-1}function Ee(t){return Math.log(1+t)}function ke(t){return Math.log(t)/Math.LN2}function Te(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Yt,cosh:Math.cosh||Qt,tanh:Math.tanh||Kt,asinh:Math.asinh||Xt,acosh:Math.acosh||Zt,atanh:Math.atanh||Jt,sqrt:Math.sqrt,cbrt:Math.cbrt||Ae,log:Math.log,log2:Math.log2||ke,ln:Math.log,lg:Math.log10||te,log10:Math.log10||te,expm1:Math.expm1||Se,log1p:Math.log1p||Ee,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||ne,"-":ee,"+":Number,exp:Math.exp,not:re,length:ue,"!":se,sign:Math.sign||xe},this.binaryOps={"+":Ct,"-":Nt,"*":It,"/":Lt,"%":Ft,"^":Math.pow,"||":Ut,"==":zt,"!=":Bt,">":Dt,"<":Wt,">=":$t,"<=":Ht,and:Vt,or:qt,in:Gt,"=":he,"[":fe},this.ternaryOps={"?":pe},this.functions={random:oe,fac:se,min:de,max:ye,hypot:Math.hypot||ce,pyt:Math.hypot||ce,pow:Math.pow,atan2:Math.atan2,if:pe,gamma:ae,roundTo:le,map:ve,fold:me,filter:be,indexOf:ge,join:we},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Te.prototype.parse=function(t){var e=[],r=new Pt(this,new Tt(this,t),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(e),r.expect(mt,"EOF"),new vt(e,this)},Te.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var _e=new Te;Te.parse=function(t){return _e.parse(t)},Te.evaluate=function(t,e){return _e.parse(t).evaluate(e)};var Pe={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Te.prototype.isOperatorEnabled=function(t){var e=function(t){return Pe.hasOwnProperty(t)?Pe[t]:t}(t),r=this.options.operators||{};return!(e in r)||!!r[e]};var Me,je=r(784),Re=new Te;function Ce(t){var e;try{e=je.ZP.parse(t)}catch(e){return t}var r,n=je.ZP.reduceExpression(e),o=t,s="";n&&"Number"!==n.type&&(o=t.replace(new RegExp(n.unit,"ig"),""),s=n.unit);try{r=Re.evaluate(o)}catch(e){return t}return s?"".concat(r).concat(s):Number.parseFloat(r.toFixed(3))}function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Ie(e){return"object"!==Ne(e)||"object"!==Ne(e.value)||(null==e?void 0:e.type)!==t.BOX_SHADOW&&(null==e?void 0:e.type)!==t.TYPOGRAPHY?L(e)?e.value.toString():e.toString():e.value}function Le(t,e,r){if("object"===Ne(r))return r;if(t&&("string"==typeof t||"number"==typeof t)){var n=Ce(String(r));return t.replace(e,String(n))}return t}function Fe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Ie(t);try{var n="string"==typeof r?N(r):null;if(null!=n&&n.length){var o=Array.from(n).map((function(r){if(r.length>1){var n,o;if(o=r.startsWith("{")?r.endsWith("}")?r.slice(1,r.length-1):r.slice(1,r.length):r.substring(1),"object"===Ne(t)&&o===t.name||o===t)return L(t)?t.value.toString():t.toString();var s=o.split("."),i=s.pop(),a=s.join("."),u=Number(s.pop()),c=s.join("."),p=e.find((function(t){return t.name===o||t.name===a||t.name===c}));if((null==p?void 0:p.name)===o)return Fe(p,e);if(i&&(null==p?void 0:p.name)===a&&null!==(n=p.rawValue)&&void 0!==n&&n.hasOwnProperty(i)){var l=p.rawValue;if("object"===Ne(l)&&!Array.isArray(l))return Fe(l[i],e)}if(void 0!==u&&i&&(null==p?void 0:p.name)===c&&Array.isArray(null==p?void 0:p.rawValue)&&null!=p&&p.rawValue[u]&&null!=p&&p.rawValue[u].hasOwnProperty(i))return Fe((null==p?void 0:p.rawValue[u])[i]||u,e)}return r}));n.forEach((function(t,e){var n=o[e];r=Le(r,t,n)})),"null"===r&&(r=null)}if(r&&"string"==typeof r){var s=N(r);if(!s){var i=Ce(r);return"number"==typeof i?i:T(i)}}}catch(r){return console.log("Error getting alias value of ".concat(JSON.stringify(t,null,2)),e),null}return r&&"string"==typeof r?Ce(r):r}function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function ze(t){return!!t&&Boolean(t.toString().match(R))}function Be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function De(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(r),!0).forEach((function(e){We(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function We(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $e(t){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function He(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ve(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ve(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qe(e){return e.filter((function(r){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var n=!1;if("string"==typeof e)n=Boolean(e.match(C));else if(e.type===t.TYPOGRAPHY||e.type===t.BOX_SHADOW)n="string"==typeof e.value?Boolean(String(e.value).match(C)):(Array.isArray(e.value)?e.value:[e.value]).some((function(t){return Object.values(t).some((function(t){return Boolean(null==t?void 0:t.toString().match(C))}))}));else{if(e.type===t.COMPOSITION)return!0;n=Boolean(e.value.toString().match(C))}if(n)return null!=Fe(e,r)}catch(t){console.log("Error checking alias of token ".concat("object"===Ue(e)?e.name:e),e,r,t)}return!1}(r,e.filter(B))}))}function Ge(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=qe(e),s=e;return s=e.map((function(e,r,n){var s,i=!1;if(e.type===t.TYPOGRAPHY||e.type===t.BOX_SHADOW)"string"==typeof e.value?(s=Fe(e.value,n),i=null===s||ze("string"==typeof s?s:"")):s=Array.isArray(e.value)?e.value.map((function(t){return Object.entries(t).reduce((function(t,e){var r=He(e,2),o=r[0],s=r[1];return t[o]=Fe(s,n),(null===t[o]||ze("string"==typeof t[o]?t[o]:""))&&(i=!0),t}),{})})):Object.entries(e.value).reduce((function(t,e){var r=He(e,2),o=r[0],s=r[1];return t[o]=Fe(s,n),(null===t[o]||ze("string"==typeof t[o]?t[o]:""))&&(i=!0),t}),{});else if(e.type===t.COMPOSITION){var a={};Object.entries(e.value).forEach((function(t){var e=He(t,2),r=e[0],o=e[1];if(Array.isArray(o)){var s=o.map((function(t){return Object.entries(t).reduce((function(t,e){var r=He(e,2),o=r[0],s=r[1];return t[o]=Fe(s,n),(null===t[o]||ze(t[o]))&&(i=!0),t}),{})}));a[r]=s}else if("object"===$e(o)){var u=Object.entries(o).reduce((function(t,e){var r=He(e,2),o=r[0],s=r[1];return t[o]=Fe(s,n),(null===t[o]||ze(t[o]))&&(i=!0),t}),{});a[r]=u}else{var c=Fe(o,n);c&&(a[r]=c),(null===c||ze(c))&&(i=!0)}})),s=a}else s=Fe(e,n),i=null===s||ze("string"==typeof s?s:"");return De(De({},o(e,"failedToResolve")),{},{value:s,rawValue:e.rawValue||e.value},i?{failedToResolve:i}:{})})),n.length>0&&(r>n.length||!r)?Ge(s,n.length):s}function Ye(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=Object.entries(e).filter((function(t){var e=He(t,2)[1];return e===Me.ENABLED||e===Me.SOURCE})).map((function(t){return He(t,1)[0]}));return Object.entries(t).reverse().forEach((function(t){(0===n.length||n.includes(t[0]))&&t[1].forEach((function(e){r.some((function(t){return t.name===e.name}))||r.push(De(De({},p(e)),{},{internal__Parent:t[0]}))}))})),r}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ke(t){return Object.entries(t).reduce((function(t,e){var r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Qe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=r[0],o=r[1];return t[n]="string"==typeof o||"number"==typeof o?{value:o,type:n}:Ke(o),t}),{})}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ze(t,e,r){var n=t;return"string"==typeof e&&t.toString()!==e&&(!1===r.resolveReferences&&(n=e),"math"===r.resolveReferences)&&("number"==typeof t?/^{[^}]*}$|^\$[^$]*$/:/{[^}]*}|\$[\w.-]*/g).test(e)&&(n=e),n}function Je(t,e,r){return Object.entries(t).reduce((function(t,n){var o=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,2),s=o[0],i=o[1],a=e[s];return t[s]=Ze(i,a,r),t}),{})}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rr(e,r,n){var o;return o=e.reduce((function(e,o){if(n.throwErrorWhenNotResolved&&o.failedToResolve)throw new Error('ERROR: failed to resolve token "'.concat(o.name,'"'));if(o.internal__Parent&&r.includes(o.internal__Parent))return e;var s=e||{},a=p(o);if(delete a.name,!0!==n.resolveReferences&&(a.value=function(e,r){if(void 0===e.rawValue)return e.value;if(e.type===t.TYPOGRAPHY||e.type===t.BOX_SHADOW||e.type===t.COMPOSITION){if(Array.isArray(e.value)){var n=e.rawValue;return e.value.map((function(t,e){return Je(t,n[e],r)}))}return Je(e.value,e.rawValue,r)}return Ze(e.value,e.rawValue,r)}(a,n)),n.preserveRawValue||delete a.rawValue,delete a.internal__Parent,n.expandTypography&&"typography"===a.type||n.expandShadow&&"boxShadow"===a.type){var u=Ke(a.value);i()(s,o.name,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){er(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},u))}else i()(s,o.name,a);return e}),{}),o}function nr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function or(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(e){sr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ur(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ur(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cr(t){var e,r,n=t.obj,o=t.token,s=t.root,i=void 0===s?null:s,a=t.returnValuesOnly,u=void 0!==a&&a,c=t.expandTypography,p=void 0!==c&&c,l=t.expandShadow,h=void 0!==l&&l,f=!(!p||!("value"in o))&&U(o.value),y=!(!h||!("value"in o))&&W(o.value);if(!L(o)||f||y)if(U(o)&&!p||W(o)&&!h)r={type:o.type,value:Object.entries(o).reduce((function(t,e){var r=ar(e,2),n=r[0],o=r[1];return t[n]=L(o)&&u?o.value:o,t}),{})},o.description&&(delete r.value.description,r.description=o.description);else if("object"===ir(o)){var d=o;L(o)&&"string"!=typeof o.value&&(d=o.value),Object.entries(d).forEach((function(t){var e=ar(t,2),r=e[0],o=e[1],s=cr({obj:n,token:o,root:[i,r].filter((function(t){return t})).join("."),returnValuesOnly:u,expandTypography:p,expandShadow:h}),a=ar(s,2)[1];i&&a?n.push(or(or({},a),{},{name:[i,r].join(".")})):a&&n.push(or(or({},a),{},{name:r}))}))}else r={value:o};else r=o;return"object"===ir(r)&&"name"in r&&null!==(e=r)&&void 0!==e&&e.name&&(r.name=r.name.split("/").join(".")),[n,r]}function pr(t){var e=t.tokens,r=t.returnValuesOnly,n=void 0!==r&&r,o=t.expandTypography,s=void 0!==o&&o,i=t.expandShadow,a=ar(cr({obj:[],root:null,token:e,returnValuesOnly:n,expandTypography:s,expandShadow:void 0!==i&&i}),1)[0];return Object.values(a)}function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function hr(t){if(Array.isArray(t))return{global:t};var e=Object.entries(t).reduce((function(t,e){var r=e[1];if(Array.isArray(r))return t.push([e[0],r]),t;if("object"===lr(r)){var n=pr({tokens:r});return t.push([e[0],n]),t}return t}),[]);return Object.fromEntries(e)}!function(t){t.DISABLED="disabled",t.SOURCE="source",t.ENABLED="enabled"}(Me||(Me={}));const fr=function(t,e,r,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{expandTypography:!1,expandShadow:!1,preserveRawValue:!1,resolveReferences:!0};return rr(Ge(Ye(hr(t),Object.fromEntries(e.map((function(t){return[t,Me.ENABLED]}))))),r,n)}(t,e,r,n)}})(),module.exports.tokenTransformer=n})();